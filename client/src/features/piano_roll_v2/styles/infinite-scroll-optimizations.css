/* Ultra Performance Infinite Scroll Optimizations */

.prv2-virtual-scroll-area {
  /* GPU acceleration for smooth scrolling */
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;

  /* Memory optimization */
  contain: layout style paint;

  /* Prevent subpixel rendering issues */
  transform-style: preserve-3d;
}

.prv2-container {
  /* Enable hardware acceleration on main container */
  will-change: scroll-position;
  contain: layout style paint;
}

.prv2-grid-area-container {
  /* Optimize scrolling performance */
  overflow: auto;
  will-change: scroll-position;

  /* Enable momentum scrolling on touch devices */
  -webkit-overflow-scrolling: touch;

  /* Prevent layout thrashing during scroll */
  contain: layout style paint;

  /* Smooth scroll behavior */
  scroll-behavior: smooth;
}

/* Virtual windowed content optimization */
.prv2-grid-area-container > div {
  /* GPU layer for main content */
  will-change: transform;
  transform: translateZ(0);

  /* Optimize repaints */
  contain: layout style paint;
}

/* Grid component optimizations */
.precision-grid {
  /* Prevent unnecessary repaints */
  will-change: transform;
  contain: layout style paint;

  /* Enable hardware acceleration */
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Notes renderer performance */
.prv2-notes-container {
  /* Enable GPU compositing */
  will-change: transform;
  transform: translateZ(0);

  /* Optimize during scrolling */
  contain: layout style paint;
}

.prv2-notes-container--scrolling {
  /* Disable expensive effects during scroll */
  pointer-events: none;
}

.prv2-notes-container--scrolling .prv2-note {
  /* Disable transitions during scroll for 60fps */
  transition: none !important;
  animation: none !important;
}

/* Timeline ruler optimization */
.prv2-ruler-container {
  /* Prevent reflow during horizontal scroll sync */
  contain: layout style paint;
  will-change: scroll-position;
}

/* Keyboard optimization */
.prv2-keyboard-container {
  /* Prevent reflow during vertical scroll sync */
  contain: layout style paint;
  will-change: scroll-position;
}

/* Velocity lane optimization */
.prv2-velocity-lane {
  /* Optimize scrolling sync */
  contain: layout style paint;
  will-change: scroll-position;
}

/* Prevent reflow cascades */
.prv2-layout-grid {
  contain: layout;
}

/* Memory efficient animations */
@media (prefers-reduced-motion: no-preference) {
  .prv2-note {
    /* Use transform instead of left/top for animations */
    will-change: transform, opacity;
  }

  .prv2-playhead {
    /* Smooth playhead movement */
    will-change: transform;
    transform: translateZ(0);
  }
}

/* High refresh rate display optimization */
@media (min-resolution: 120dpi) {
  .prv2-grid-area-container {
    /* Reduce scroll throttling for high-DPI displays */
    scroll-behavior: auto;
  }
}

/* Large screen optimizations */
@media (min-width: 1920px) {
  .prv2-virtual-scroll-area {
    /* Increase buffer for large viewports */
    min-width: 100vw;
  }
}