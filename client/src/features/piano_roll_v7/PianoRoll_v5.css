/* src/features/piano_roll_v5/PianoRoll_v5.css */

.prv5-container {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  background-color: var(--zenith-bg-secondary); /* Koyu Mavi-Gri Arkaplan */
  color: var(--zenith-text-primary);
  overflow: hidden;
  user-select: none; /* Metin seçimini engelle */
}

.prv5-toolbar {
  flex-shrink: 0;
  padding: 8px 12px;
  background-color: var(--zenith-bg-tertiary);
  border-bottom: 1px solid var(--zenith-border-strong);
  display: flex;
  align-items: center;
  gap: 16px;
  font-size: 13px;
  height: 48px;
  z-index: 10;
}

.prv5-canvas-container {
  flex-grow: 1;
  position: relative;
  overflow: hidden; /* Canvas'ın taşmasını engelle */
  cursor: default; /* Default cursor - will be overridden by dynamic states */
}

/* ========================================
   CURSOR HIERARCHY (Priority Order)
   Premium Zenith-themed cursors with glow effects
   ======================================== */

/* Smooth cursor transitions */
.prv5-canvas-container {
  transition: cursor 0.1s ease-out;
}

/* Priority 1-5: Dynamic operation cursors (set via data-cursor) */

/* Eraser - Premium delete cursor with glow effect */
.prv5-canvas-container[data-cursor="eraser"] {
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><defs><filter id="glow"><feGaussianBlur stdDeviation="1.5" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(%23glow)"><circle cx="16" cy="16" r="14" fill="rgba(239, 68, 68, 0.15)" stroke="rgb(239, 68, 68)" stroke-width="2"/><path d="M10 12h12M11 12v10c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V12M14 12V9c0-.55.45-1 1-1h2c.55 0 1 .45 1 1v3M14 16v5M18 16v5" stroke="rgb(239, 68, 68)" stroke-width="2" stroke-linecap="round" fill="none"/></g></svg>') 16 16, not-allowed !important;
}

/* Grabbing - Premium hand cursor with shadow */
.prv5-canvas-container[data-cursor="grabbing"] {
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><defs><filter id="shadow"><feGaussianBlur in="SourceAlpha" stdDeviation="1"/><feOffset dx="0" dy="1" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.3"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(%23shadow)"><path d="M20 10v4M18 8v6M16 10v4M14 12v6l-4 2c-1.1 0-2-.9-2-2v-6c0-.55.45-1 1-1h1V8c0-.55.45-1 1-1s1 .45 1 1v3h1V7c0-.55.45-1 1-1s1 .45 1 1v4h1V6c0-.55.45-1 1-1s1 .45 1 1v5h1c.55 0 1 .45 1 1v6c0 1.1-.9 2-2 2l-4-2z" fill="%233B82F6" stroke="%231E40AF" stroke-width="1.5" stroke-linejoin="round"/></g></svg>') 16 16, grabbing !important;
}

/* Resize - Premium horizontal resize with arrows */
.prv5-canvas-container[data-cursor="ew-resize"] {
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><defs><filter id="glow2"><feGaussianBlur stdDeviation="1" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(%23glow2)"><line x1="6" y1="16" x2="26" y2="16" stroke="%2310B981" stroke-width="2.5" stroke-linecap="round"/><path d="M6 16l4-4M6 16l4 4" stroke="%2310B981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/><path d="M26 16l-4-4M26 16l-4 4" stroke="%2310B981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/><circle cx="16" cy="16" r="2" fill="%2310B981"/></g></svg>') 16 16, ew-resize !important;
}

/* Crosshair - Premium precision cursor */
.prv5-canvas-container[data-cursor="crosshair"] {
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><defs><filter id="glow3"><feGaussianBlur stdDeviation="0.8" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(%23glow3)"><circle cx="16" cy="16" r="8" fill="none" stroke="%23A855F7" stroke-width="2" opacity="0.3"/><circle cx="16" cy="16" r="3" fill="none" stroke="%23A855F7" stroke-width="2"/><line x1="16" y1="4" x2="16" y2="10" stroke="%23A855F7" stroke-width="2" stroke-linecap="round"/><line x1="16" y1="22" x2="16" y2="28" stroke="%23A855F7" stroke-width="2" stroke-linecap="round"/><line x1="4" y1="16" x2="10" y2="16" stroke="%23A855F7" stroke-width="2" stroke-linecap="round"/><line x1="22" y1="16" x2="28" y2="16" stroke="%23A855F7" stroke-width="2" stroke-linecap="round"/><circle cx="16" cy="16" r="1" fill="%23A855F7"/></g></svg>') 16 16, crosshair !important;
}

/* Paint Brush - Premium brush cursor */
.prv5-canvas-container[data-cursor="paintBrush"] {
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><defs><filter id="glow4"><feGaussianBlur stdDeviation="1" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(%23glow4)"><circle cx="20" cy="12" r="6" fill="rgba(59, 130, 246, 0.2)" stroke="%233B82F6" stroke-width="2"/><path d="M18 18l-8 8c-1.1 1.1-2.9 1.1-4 0s-1.1-2.9 0-4l8-8" stroke="%233B82F6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/><circle cx="20" cy="12" r="2" fill="%233B82F6"/></g></svg>') 6 26, crosshair !important;
}

/* Priority 6: Tool-specific cursors (fallback when no operation active) */

/* Select Tool - Premium pointer with subtle hover effect */
.prv5-canvas-container[data-tool="select"] {
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M5 3l14 9-6 1-2 6-6-16z" fill="white" stroke="black" stroke-width="1.5"/></svg>') 2 2, default;
}

/* Paint Brush Tool - Same as dynamic paintBrush */
.prv5-canvas-container[data-tool="paintBrush"] {
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><defs><filter id="glow4"><feGaussianBlur stdDeviation="1" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(%23glow4)"><circle cx="20" cy="12" r="6" fill="rgba(59, 130, 246, 0.2)" stroke="%233B82F6" stroke-width="2"/><path d="M18 18l-8 8c-1.1 1.1-2.9 1.1-4 0s-1.1-2.9 0-4l8-8" stroke="%233B82F6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/><circle cx="20" cy="12" r="2" fill="%233B82F6"/></g></svg>') 6 26, crosshair;
}

/* Eraser Tool - Same as dynamic eraser */
.prv5-canvas-container[data-tool="eraser"] {
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><defs><filter id="glow"><feGaussianBlur stdDeviation="1.5" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(%23glow)"><circle cx="16" cy="16" r="14" fill="rgba(239, 68, 68, 0.15)" stroke="rgb(239, 68, 68)" stroke-width="2"/><path d="M10 12h12M11 12v10c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V12M14 12V9c0-.55.45-1 1-1h2c.55 0 1 .45 1 1v3M14 16v5M18 16v5" stroke="rgb(239, 68, 68)" stroke-width="2" stroke-linecap="round" fill="none"/></g></svg>') 16 16, not-allowed;
}

/* Music Tools - Premium wand cursor */
.prv5-canvas-container[data-tool="chopper"],
.prv5-canvas-container[data-tool="strumizer"],
.prv5-canvas-container[data-tool="arpeggiator"],
.prv5-canvas-container[data-tool="flam"] {
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"><defs><filter id="wand-glow"><feGaussianBlur stdDeviation="0.8"/><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(%23wand-glow)"><path d="M8 20l12-12M18 10l2-2M10 18l-2 2M20 12l4-4M12 20l-4 4" stroke="%23F59E0B" stroke-width="2.5" stroke-linecap="round"/><circle cx="20" cy="8" r="2.5" fill="%23F59E0B"/><circle cx="8" cy="20" r="2.5" fill="%23F59E0B"/><circle cx="24" cy="4" r="1.5" fill="%23FCD34D"/><circle cx="4" cy="24" r="1.5" fill="%23FCD34D"/></g></svg>') 4 4, pointer;
}

/* Randomizer - Premium dice cursor */
.prv5-canvas-container[data-tool="randomizer"] {
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"><defs><filter id="dice-glow"><feGaussianBlur stdDeviation="0.8"/><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(%23dice-glow)"><rect x="6" y="6" width="16" height="16" rx="3" fill="%23EC4899" stroke="%239D174D" stroke-width="2"/><circle cx="11" cy="11" r="1.5" fill="white"/><circle cx="17" cy="11" r="1.5" fill="white"/><circle cx="14" cy="14" r="1.5" fill="white"/><circle cx="11" cy="17" r="1.5" fill="white"/><circle cx="17" cy="17" r="1.5" fill="white"/></g></svg>') 14 14, help;
}

/* Flip - Premium flip cursor */
.prv5-canvas-container[data-tool="flip"] {
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"><defs><filter id="flip-glow"><feGaussianBlur stdDeviation="0.8"/><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(%23flip-glow)"><path d="M14 4v20M14 4l-4 4M14 4l4 4M14 24l-4-4M14 24l4-4M8 14h12" stroke="%2306B6D4" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><circle cx="8" cy="14" r="2" fill="%2306B6D4"/><circle cx="20" cy="14" r="2" fill="%2306B6D4"/></g></svg>') 14 14, move;
}

.prv5-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/* Multi-layer canvas system for performance optimization */
.prv5-canvas-main {
  z-index: 1; /* Static layer: grid, notes, keyboard, timeline */
}

.prv5-canvas-playhead {
  z-index: 2; /* Playhead layer: only playhead rendering at 60Hz */
  pointer-events: none; /* Allow mouse events to pass through to main canvas */
}

.prv5-debug-overlay {
  position: absolute;
  top: 10px;
  right: 10px;
  background-color: rgba(0, 0, 0, 0.7);
  padding: 8px;
  border-radius: 4px;
  font-family: monospace;
  font-size: 11px;
  color: var(--zenith-success);
  pointer-events: none;
  line-height: 1.4;
  z-index: 20;
}

.prv5-toolbar-group {
  display: flex;
  align-items: center;
  gap: 8px;
}

.prv5-toolbar-group label {
  font-size: 12px;
  color: var(--zenith-text-secondary);
  font-weight: 500;
}

.prv5-select, .prv5-button {
  background-color: var(--zenith-bg-tertiary);
  color: var(--zenith-text-primary);
  border: 1px solid var(--zenith-border-strong);
  border-radius: 4px;
  padding: 4px 8px;
  font-size: 12px;
}

.prv5-button {
  cursor: pointer;
  transition: background-color 150ms ease;
}

.prv5-button:hover {
  background-color: var(--zenith-bg-tertiary);
}

.prv5-button.active {
  background-color: var(--zenith-accent-cool);
  border-color: var(--zenith-accent-cool);
  color: var(--zenith-text-primary);
}

.prv5-shortcuts-info {
  color: var(--zenith-text-tertiary);
  font-size: 11px;
  margin-left: auto;
}

.prv5-shortcuts-info kbd {
  background-color: var(--zenith-bg-tertiary);
  color: var(--zenith-text-primary);
  padding: 2px 4px;
  border-radius: 3px;
  font-size: 10px;
  font-family: monospace;
  border: 1px solid var(--zenith-border-strong);
}

/* ========================================
   NOTE ANIMATIONS - Visual Feedback
   ======================================== */

/* Note added animation - scale up with glow */
@keyframes noteAdded {
  0% {
    transform: scale(0.5);
    opacity: 0;
    filter: drop-shadow(0 0 8px var(--zenith-success));
  }
  50% {
    transform: scale(1.15);
    filter: drop-shadow(0 0 12px var(--zenith-success));
  }
  100% {
    transform: scale(1);
    opacity: 1;
    filter: drop-shadow(0 0 0 transparent);
  }
}

/* Note deleted animation - scale down with fade and red glow */
@keyframes noteDeleted {
  0% {
    transform: scale(1);
    opacity: 1;
    filter: drop-shadow(0 0 0 transparent);
  }
  50% {
    transform: scale(1.1);
    filter: drop-shadow(0 0 12px rgb(239, 68, 68));
  }
  100% {
    transform: scale(0.3);
    opacity: 0;
    filter: drop-shadow(0 0 8px rgb(239, 68, 68));
  }
}

/* Note modified animation - quick pulse */
@keyframes noteModified {
  0%, 100% {
    transform: scale(1);
    filter: drop-shadow(0 0 0 transparent);
  }
  50% {
    transform: scale(1.05);
    filter: drop-shadow(0 0 8px var(--zenith-accent));
  }
}

/* Apply animations to canvas notes (requires renderer integration) */
.prv5-note-added {
  animation: noteAdded 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.prv5-note-deleted {
  animation: noteDeleted 0.25s cubic-bezier(0.4, 0, 0.6, 1);
}

.prv5-note-modified {
  animation: noteModified 0.2s ease-out;
}
